<!doctype html>
<html lang="en">
<head>
    {% include 'head.html' %}
    <title>ExilTool</title>
    <style>
        .content {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin-top: 1em;
        }

        .card {
            white-space: nowrap;
            margin: 0.5em;
            width: 14em;
            position: relative;
        }
        .number {
            position: absolute;
            width: 20px;
            height: 20px;
            top: 0;
            right: 0;
            z-index: 20;
        }

        .list-group-item {
            padding: 0.5em;
        }
    </style>
</head>
<body>
<div class="container">
    {% include 'menu.html' %}
    <div class="content">
        <h1 id="title">Carte galaxie {{ sector.galaxy }} secteur {{ sector.sector }}</h1>
        <form id="changemap" class="form-inline">
            <label for="galaxy" class="sr-only">galaxie</label>
            <input type="number" min="1" max="10" id="galaxy" class="form-control form-control-sm mb-2 mr-sm-2"
                   placeholder="Galaxie" value="{{ sector.galaxy }}" required>
            <label for="sector" class="sr-only">secteur</label>
            <input type="number" min="1" max="99" id="sector" class="form-control form-control-sm mb-2 mr-sm-2"
                   placeholder="Password" value="{{ sector.sector }}" required>
            <button class="btn btn-lg btn-primary mb-2 btn-sm" type="submit">Go</button>
        </form>
        <div class="content">
            <div class="row">
                {% for place in sector.places %}
                    {% if place.position % 5 == 1 and place.position != 1 %}
                        </div>
                        <div class="row">
                    {% endif %}
                    {% if not place.planet %}
                        <div class="col">
                            <div class="card border-primary small">
                                Plan√®te inconnue
                            </div>
                        </div>
                    {% else %}
                        <div class="col">
                            <div class="card border-primary small">
                                <div class="number">
                                    {{  place.position }}
                                </div>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item">Terrain: {{ place.planet.land }}</li>
                                    <li class="list-group-item">Espace: {{ place.planet.space }}</li>
                                    <li class="list-group-item">Minerai: {{ place.planet.mineral }} - {{ (place.planet.mineral_prod // 1000) | int }}k/h</li>
                                    <li class="list-group-item">Hydro: {{ place.planet.hydrocarbon }} - {{ (place.planet.hydrocarbon_prod // 1000) | int }}k/h</li>
                                </ul>
                            </div>
                        </div>
                    {% endif %}
                {% endfor %}
                </div>
        </div>
    </div>
</div>
<script>
    $('#changemap').submit(function (event) {
        var galaxy = parseInt($('#galaxy').val());
        var sector = parseInt($('#sector').val());

        params = $.param({'g': galaxy, 's': sector});

        window.location.replace('/map?' + params);

        event.preventDefault();
        return false;
    });
</script>
</body>
</html>
